# Оффер

## Введение

В этом примере мы расскажем вам о том, что нужно сделать для успешного вызова нашего API и получения ответа.

## Аутентификация

Прежде всего, для использования нашего сайта вам потребуется аутентификация. Вы можете получить ключ и секрет API, [связавшись с нашей командой][2].

После получения ключа и секрета API вам нужно будет настроить с их помощью свое окружение. Более подробно процесс аутентификации описан в [документации по аутентификации][3].

## Просмотреть оффер

Предположим вы хотите просмотреть оффер с [GUID][5] `7fcdfb34-cf28-43d6-908b-949361c8ce2f`.

Для того чтобы получить текущее состояние оффера в системе выполнитите `GET` запрос по указанному ниже URL используя [GUID][5] из [1C][6].

```json
GET /offers/7fcdfb34-cf28-43d6-908b-949361c8ce2f
```

Ответ:
```json
{
    "data": {
        "id": "7fcdfb34-cf28-43d6-908b-949361c8ce2f",
        "product_id": "510e03eb-513d-4a1e-86e7-be57b3039597",
        "quantity": 10,
        "subtract": true,
        "price": 1399,
        "barcode": "12345679",
        "product_code": "Travel",
        "name_for_print": "Колготки Трэвэл (Travel)",
        "image": "some_image.png"
    }
}
```

## Обновить цену

Для того чтобы обновить цену, необходимо выполнить `PUT` запрос содержащий json с информацией о цене:

```json
PUT /offers/7fcdfb34-cf28-43d6-908b-949361c8ce2f/price

{
    "price": 999
}
```

Ответ:
```json
{
    "message": "Offer price updated."
}
```

## Обновить количество

Для того чтобы обновить количество, необходимо выполнить `PUT` запрос содержащий json с информацией о количестве единиц товара:

```json
PUT /offers/7fcdfb34-cf28-43d6-908b-949361c8ce2f/quantity

{
    "quantity": 3
}
```

Ответ:
```json
{
    "message": "Offer quantity updated."
}
```

Запрос считается успешным если в ответ получен код `200`.

## Массовое обновление офферов

!!! warning ""

    Обновление будет происходить в очереди, и может отобразится не сразу на стороне магазина.

```json
POST /offers/update

{
    "offers": [
        {
            "id": "7fcdfb34-cf28-43d6-908b-949361c8ce2f",
            "price": 999,
            "quantity": 3
        }
    ]
}
```

Ответ:
```json
{
    "message": "Update queued."
}
```

Запрос считается успешным если в ответ получен код `200`.


[2]: mailto:admin@melle.online
[3]: auth.md
[4]: auth.md#url
[5]: https://en.wikipedia.org/wiki/Universally_unique_identifier
[6]: https://1c.ru/
